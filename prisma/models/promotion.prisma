model Promotion {
  id              String              @id @default(cuid())
  eventId         String
  name            String
  description     String?             @db.Text
  requiresCode    Boolean             @default(true) // Code-based vs Automatic
  discountType    DiscountType
  discountValue   Int                 // Percent in basis points (100 = 1%) or fixed amount in PHP
  appliesTo       PromotionAppliesTo  @default(ITEM)
  validFrom       DateTime
  validUntil      DateTime
  maxRedemptions  Int?                // Global limit
  maxPerUser      Int?                // Per-user limit
  createdAt       DateTime            @default(now())
  updatedAt       DateTime            @updatedAt

  event         Event                @relation(fields: [eventId], references: [id], onDelete: Cascade)
  voucherCodes  VoucherCode[]
  ticketTypes   PromotionTicketType[]

  @@index([eventId])
  @@index([validFrom, validUntil])
  @@map("promotions")
}

enum DiscountType {
  PERCENT // Stored as basis points (100 = 1%)
  FIXED   // Stored as PHP amount
}

enum PromotionAppliesTo {
  ORDER // Order-level discount
  ITEM  // Item-level discount
}

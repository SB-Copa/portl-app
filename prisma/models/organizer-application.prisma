model OrganizerApplication {
  id          String                     @id @default(cuid())
  tenantId    String                     @unique
  status      OrganizerApplicationStatus @default(NOT_STARTED)
  currentStep Int                        @default(1)

  // Step 1: Event Portfolio (4 parts as JSON)
  pastEvents       Json?
  venuesWorkedWith Json?
  artistsTalent    Json?
  references       Json?

  // Step 2: Identity Verification (placeholder URLs for Vercel Blob)
  governmentIdUrl String?
  selfieWithIdUrl String?
  businessIdUrl   String? // Optional

  // Step 3: Agreements
  tosAccepted                Boolean @default(false)
  organizerAgreementAccepted Boolean @default(false)
  privacyPolicyAccepted      Boolean @default(false)
  communityGuidelinesAccepted Boolean @default(false)

  // Review tracking
  reviewStartedAt DateTime?

  submittedAt DateTime?
  reviewedAt  DateTime?
  reviewedBy  String?
  reviewNotes String?   @db.Text

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  tenant Tenant @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  notes   ApplicationNote[]

  @@index([tenantId])
  @@index([status])
  @@map("organizer_applications")
}

enum OrganizerApplicationStatus {
  NOT_STARTED
  IN_PROGRESS
  SUBMITTED
  APPROVED
  REJECTED
}

enum OrganizerType {
  INDIVIDUAL
  TEAM
  COMPANY
}
